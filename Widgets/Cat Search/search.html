<!DOCTYPE HTML>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="css/list.css" />
    <script src = "http://code.jquery.com/jquery-1.8.2.min.js"></script>
     <script src = "js/cat.js"></script>
    <title>The 'Cat'alog</title> 
</head>
<body>
    <div id="widget">
        <table><!--This table has been created to allow divs to be positioned side by side-->
            <tr>
                <td>
                    <div id="maindiv">
                        <label for="category">Category:</label>
                        <select id="category" class="select">
                            <option value="a" id="a">Breed</option>
                            <option value="b" id="b">Color</option>
                            <option value="c" id="c">Eye Color</option>
                            <option value="d" id="d">Hair Length</option>
                            <option value="e" id="e">Sex</option>
                            <option value="f" id="f">Fixed?</option>
                            <option value="g" id="g">Age</option>
                        </select>
                        <input type="button" value="Add Category" id="addC" />
                    </div> 
                    <br />
                </td>
                <td>
                    <!--this data row will be for the selected cat information and picture.-->
                    <div id="selectedCatDiv">
                    </div>
                </td>
            </tr>
            <tr>
                <td>
                    <div class="box">
                        <div style="position:relative" class="div" id="breedDiv">
                            <div class="clonedInput" style="margin-bottom:4px;" id="input1">
                                <label>Breed:</label>
                                <select class="select" name="BreedList" id = "BreedList1">
                                    <option value="tabby">Tabby</option>
                                    <option value="maine coon">Maine Coon</option>
                                    <option value="persian">Persian</option>
                                    <option value="siamese">Siamese</option>
                                    <option value="ragdoll">Ragdoll</option>
                                    <option value="sphynx">Sphinx</option>
                                </select>
                            </div>
                            <div>
                                <input type="button" value="Add another breed" id="btnAdd" class="buttonDiv">
                                <input type="button" value="Remove breed" id="btnDel" class="buttonDiv" disabled = "disabled">
                            </div>
                            </br>
                        </div>
                        <div style="position:relative" class="div" id = "colorDiv">
                            <div class="clonedColorInput" style="margin-bottom:4px;" id="color1">
                                <label> Color:</label>
                                <select name = "ColorList" class = "Colorselect" >
                                    <option value = "white">White</option>
                                    <option value = "black">Black</option>
                                    <option value = "orange">Orange</option>
                                    <option value = "calico">Calico</option>
                                    <option value = "gray">Gray</option>
                                    <option value = "brown">Brown</option>
                                </select> 
                            </div>
                            <div>
                                <input type="button" value="Add another color" id="colorAdd" class="buttonDiv">
                                <input type="button" value="Remove color" id="colorDel" class="buttonDiv">
                            </div>
                            </br>
                        </div> 
                        <div style="position:relative" class="div" id = "eyeDiv">
                            <div class="clonedEyeInput" style="margin-bottom:4px;" id="eye1">
                                <label> Eye Color:</label>
                                <select name = "EyeList" class = "Eyeselect" >
                                    <option value = "green">Green</option>
                                    <option value = "gray">Gray</option>
                                    <option value = "blue">Blue</option>
                                    <option value = "yellow">Yellow</option>
                                </select> 
                            </div>
                            <div>
                                <input type="button" value="Add another eye color" id="ecAdd" class="buttonDiv">
                                <input type="button" value="Remove eye color" id="ecDel" class="buttonDiv">
                            </div>
                            <br />
                        </div> 
                        <div style="position:relative" class="div" id = "hairDiv">
                            <div class="clonedHairInput" style="margin-bottom:4px;" id="hair1">
                                <label> Hair Length:</label>
                                <select name = "HairList" class = "Hairselect" >
                                    <option value = "long">Long Hair</option>
                                    <option value = "short">Short Hair</option>
                                    <option value = "none">Hairless</option>
                                </select> 
                                </div>
                            <div>
                                <input type="button" value="Add a hair length" id="hairAdd" class="buttonDiv">
                                <input type="button" value="Remove hair length" id="hairDel" class="buttonDiv">
                            </div>
                            <br />
                        </div> 
                        <div style="position:relative" class="div" id = "sexDiv">
                            <div class="clonedSexInput" style="margin-bottom:4px;" id="sex1">
                                <label> Sex:</label>
                                <select name = "SexList" class = "Sexselect" >
                                    <option value = "female">Female</option>
                                    <option value = "male">Male</option>
                                </select> 
                                </div>
                            <div>
                                <input type="button" value="Add sex" id="sexAdd" class="buttonDiv">
                                <input type="button" value="Remove sex" id="sexDel" class="buttonDiv">
                            </div>
                            </br>
                        </div>   
                        <div style="position:relative" class="div" id = "fixDiv">
                            <div class="clonedFixInput" style="margin-bottom:4px;" id="fix1">
                                <label> Spayed or Neutered?:</label>
                                <select name = "fixList" class = "Fixselect" >
                                    <option value = "fixed">Spay/Neuter</option>
                                    <option value = "notFixed">Intact</option>
                                </select> 
                                </div>
                            <div>
                                <input type="button" value="Add choice" id="fixAdd" class="buttonDiv">
                                <input type="button" value="Remove choice" id="fixDel" class="buttonDiv">
                            </div>
                            </br>
                        </div> 
                        <div style="position:relative" class="div" id = "ageDiv">
                            <div class="clonedAgeInput" style="margin-bottom:4px;" id="age1">
                                <label> Prefered Age:</label>
                                <select name = "ageList" class = "Ageselect" >
                                    <option value = "kitten">Kitten (under 2 years)</option>
                                    <option value = "young adult">Young Adult (2-7 years)</option>
                                    <option value = "adult">Adult (7+ years)</option>
                                </select> 
                                </div>
                            <div>
                                <input type="button" value="Add age" id="ageAdd" class="buttonDiv">
                                <input type="button" value="Remove age" id="ageDel" class="buttonDiv">
                            </div>
                            <br />
                        </div>      
                        <br />
                    </div>
                </td>
                <td>
                    <!--this div is for the select list and printed information for each cat-->
                    <div>
                        <table>
                            <tr>
                                <td>
                                    <select id = "catList" multiple="yes">
                                        <option>Select a Cat</option>
                                    </select>
                                </td>
                                <td>
                                    <textarea id="catListInfo"></textarea>
                                </td>
                            </tr>
                        </table>
                        
                    </div>
                </td>
            </tr>
            <tr>
                <td>
                    <input type = "button" value = "Find My Cat" id = "submit">
                </td>
            </tr>
        </table>
</div>

<script>
    var newNum = 0;

    var selectedCats = new Array();
    var selectedCatList = new Array();

    Array.prototype.contains = function(obj) {
        var i = this.length;
        while (i--) {
            if (this[i] === obj) {
                return true;
            }
        }
        return false;
    }

    $('#catList').change(function() {
        var db= new createCatDB();
        var catArray=db.getDB();
        var mycats= $('#catList').val();
        var temp = '';
        console.log("mycats: " + mycats);
        for(var i=0; i<catArray.length;i++){
            if(mycats==catArray[i].getName()){
                temp=catArray[i];
                $('#catListInfo').val(temp);
            }
        }

    });
    $('#submit').click(function() {
        var catDb = new createCatDB();
        catArray = catDb.getDB();
        for (i=0;i<catArray.length;i++){
            for(j=0;j<selectedCats.length;j++){
                console.log(selectedCats[j])
                if(!selectedCatList.contains(catArray[i])){
                    if(selectedCats[j]==catArray[i].getBreed()){//this if statement operates off of the assumption that "OR" is the boolean connecting each list.
                      selectedCatList.push(catArray[i]);
                      console.log("breed " + selectedCats[j] + "added from" + catArray[i].getName());  
                    }
                     else if(selectedCats[j]==catArray[i].getColor()){
                      selectedCatList.push(catArray[i]);  
                      console.log("color " + selectedCats[j] + "added from" + catArray[i].getName());  
                    }
                    else if(selectedCats[j]==catArray[i].getEyeColor()){
                      selectedCatList.push(catArray[i]); 
                      console.log("eye color " + selectedCats[j] + "added from" + catArray[i].getName());   
                    }
                    else if(selectedCats[j]==catArray[i].getHairLength()){
                      selectedCatList.push(catArray[i]);  
                      console.log("hair length " + selectedCats[j] + "added from" + catArray[i].getName());  
                    }
                    else if(selectedCats[j]==catArray[i].getSex()){
                      selectedCatList.push(catArray[i]);  
                      console.log("sex " + selectedCats[j] + "added from" + catArray[i].getName());  
                    }
                    else if(selectedCats[j]==catArray[i].getAgeRange()){
                      selectedCatList.push(catArray[i]);  
                      console.log("age range" + selectedCats[j] + "added from" + catArray[i].getName());  
                    }
                    else if(selectedCats[j]==catArray[i].checkIfFixed()){
                      selectedCatList.push(catArray[i]);
                      console.log("fixed? " + selectedCats[j] + "added from" + catArray[i].getName());    
                    }
                    else{
                        //selectedCatList.pop(catArray[i]);//not sure if this is something we want to keep, but it drastically narrows the list.
                       // console.log(catArray[i].getName + "popped");
                    }
                }
                
                    
            }
        }
       // console.log(selectedCatList);
        for (k=0;k<selectedCatList.length;k++){
           $('<option/>').val(selectedCatList[k]).html(selectedCatList[k].getName()).appendTo('#catList');
        }
        console.log(selectedCatList.length);
    });
    $('#addC').click(function() {
     var val = $('#category').val();
     if (val == "a") {
         $('#breedDiv').css('display', 'block');
         $('#input1').css('display', 'block');
         $('.clonedInput').css('display', 'block');
     }
     else if (val == "b") {
         $('#colorDiv').css('display', 'block');
         $('#color1').css('display', 'block');
         $('.clonedColorInput').css('display', 'block');
     }
    else if (val == "c") {
         $('#eyeDiv').css('display', 'block');
         $('#eye1').css('display', 'block');
         $('.clonedEyeInput').css('display', 'block');
     }
    else if (val == "d") {
         $('#hairDiv').css('display', 'block');
         $('#hair1').css('display', 'block');
         $('.clonedHairInput').css('display', 'block');
     }
    else if (val == "e") {
         $('#sexDiv').css('display', 'block');
         $('#sex1').css('display', 'block');
         $('.clonedSexInput').css('display', 'block');
     }
    else if (val == "f") {
         $('#fixDiv').css('display', 'block');
         $('#fix1').css('display', 'block');
         $('.clonedFixInput').css('display', 'block');
     }
    else if (val == "g") {
         $('#ageDiv').css('display', 'block');
         $('#age1').css('display', 'block');
         $('.clonedAgeInput').css('display', 'block');
     }
    });
 $('#btnAdd').click(function () {
        var num = $('.clonedInput').length; // how many "duplicatable" input fields we currently have
        newNum = num + 1; // the numeric ID of the new input field being added
        var newElem = $('#input' + num).clone().attr('id', 'input' + newNum); // create the new element via clone(), and manipulate it's ID using newNum value
        //console.log("newNum:" + newNum + " num: " + num + " newElem: " + newElem)
        $('#BreedList' + num).attr('id', 'BreedList' + newNum);
        $('.select').each(function (index) {
            newElem.children('.select').children('option[value="' + $(this).val() + '"]').remove();
           temp = $(this).val();
           if(!selectedCats.contains(temp))
           {
                selectedCats.push(temp);
           }
        });
        $('#input' + num).after(newElem); // insert the new element after the last "duplicatable" input field
        //$('#btnDel').attr('disabled', true); // enable the "remove" button

        if (newNum > 6) {
            $('#btnAdd').attr('disabled', true);
        }
        if (newNum >= 2) {
            $('#btnDel').attr('disabled', false);
        }
        else
            $('#btnDel').attr('disabled', true);

    });

    $('#btnDel').click(function () {
        var num = $('.clonedInput').length; // how many "duplicatable" input fields we currently have
        newNum = num + 1;
        var num = $('.clonedInput').length; // how many "duplicatable" input fields we currently have
        $('#input' + num).remove(); // remove the last element
        $('#btnAdd').attr('disabled', false); // enable the "add" button
        newNum--;

        if (newNum == 2) {
            $('#btnDel').attr('disabled', true);
        }

    });
    $('#colorAdd').click(function () {
        var num = $('.clonedColorInput').length; // how many "duplicatable" input fields we currently have
        newNum = num + 1; // the numeric ID of the new input field being added
        var newElem = $('#color' + num).clone().attr('id', 'color' + newNum); // create the new element via clone(), and manipulate it's ID using newNum value

        $('.Colorselect').each(function (index) {
            newElem.children('.Colorselect').children('option[value="' + $(this).val() + '"]').remove();
           temp = $(this).val();
           if(!selectedCats.contains(temp))
           {
                selectedCats.push(temp);
           }

        });
        $('#color' + num).after(newElem); // insert the new element after the last "duplicatable" input field
        $('#colorDel').attr('disabled', false); // enable the "remove" button


        if (newNum > 6) {
            $('#colorAdd').attr('disabled', true);
        }

        if (newNum >= 2) {
            $('#colorDel').attr('disabled', false);
        }
        else
            $('#colorDel').attr('disabled', true);

    });

    $('#colorDel').click(function () {
        var num = $('.clonedColorInput').length; // how many "duplicatable" input fields we currently have
        newNum = num + 1;
        $('#color' + num).remove(); // remove the last element
        $('#colorAdd').attr('disabled', false); // enable the "add" button
        newNum--;
        if (newNum == 2) {
            $('#colorDel').attr('disabled', true);
        }
        else
            $('#colorDel').attr('disabled', true);

    });
    $('#ecAdd').click(function () {
        var num = $('.clonedEyeInput').length; // how many "duplicatable" input fields we currently have
        newNum = num + 1; // the numeric ID of the new input field being added
        var newElem = $('#eye' + num).clone().attr('id', 'eye' + newNum); // create the new element via clone(), and manipulate it's ID using newNum value

        $('.Eyeselect').each(function (index) {
            newElem.children('.Eyeselect').children('option[value="' + $(this).val() + '"]').remove()
            temp = $(this).val();
           if(!selectedCats.contains(temp))
           {
                selectedCats.push(temp);
           }
        });
        $('#eye' + num).after(newElem); // insert the new element after the last "duplicatable" input field
        $('#ecDel').attr('disabled', false); // enable the "remove" button


        if (newNum > 4) {
            $('#ecAdd').attr('disabled', true);
        }

        if (newNum >= 2) {
            $('#ecDel').attr('disabled', false);
        }
        else
            $('#ecDel').attr('disabled', true);

    });

    $('#ecDel').click(function () {
        var num = $('.clonedEyeInput').length; // how many "duplicatable" input fields we currently have
        newNum=num+1;
        $('#eye' + num).remove(); // remove the last element
        $('#ecAdd').attr('disabled', false); // enable the "add" button
         newNum--;
        if (newNum == 2) {
            $('#ecDel').attr('disabled', true);
        }
    });
    $('#hairAdd').click(function () {
        var num = $('.clonedHairInput').length; // how many "duplicatable" input fields we currently have
        newNum = num + 1; // the numeric ID of the new input field being added
        var newElem = $('#hair' + num).clone().attr('id', 'hair' + newNum); // create the new element via clone(), and manipulate it's ID using newNum value

        $('.Hairselect').each(function (index) {
            newElem.children('.Hairselect').children('option[value="' + $(this).val() + '"]').remove()
            temp = $(this).val();
           if(!selectedCats.contains(temp))
           {
                selectedCats.push(temp);
           }
        });
        $('#hair' + num).after(newElem); // insert the new element after the last "duplicatable" input field
        $('#hairDel').attr('disabled', false); // enable the "remove" button


        if (newNum > 4) {
            $('#hairAdd').attr('disabled', true);
        }

        if (newNum > 1) {
            $('#hairDel').attr('disabled', false);
        }

    });

    $('#hairDel').click(function () {
        var num = $('.clonedHairInput').length; // how many "duplicatable" input fields we currently have
        $('#hair' + num).remove(); // remove the last element
        $('#hairAdd').attr('disabled', false); // enable the "add" button
    });
    $('#sexAdd').click(function () {
        var num = $('.clonedSexInput').length; // how many "duplicatable" input fields we currently have
        newNum = num + 1; // the numeric ID of the new input field being added
        var newElem = $('#sex' + num).clone().attr('id', 'sex' + newNum); // create the new element via clone(), and manipulate it's ID using newNum value

        $('.Sexselect').each(function (index) {
            newElem.children('.Sexselect').children('option[value="' + $(this).val() + '"]').remove()
            temp = $(this).val();
           if(!selectedCats.contains(temp))
           {
                selectedCats.push(temp);
           }
        });
        $('#sex' + num).after(newElem); // insert the new element after the last "duplicatable" input field
        $('#sexDel').attr('disabled', false); // enable the "remove" button


        if (newNum > 2) {
            $('#sexAdd').attr('disabled', true);
        }

        if (newNum > 1) {
            $('#sexDel').attr('disabled', false);
        }

    });

    $('#sexDel').click(function () {
        var num = $('.clonedSexInput').length; // how many "duplicatable" input fields we currently have
        $('#sex' + num).remove(); // remove the last element
        $('#sexAdd').attr('disabled', false); // enable the "add" button
    });
    $('#fixAdd').click(function () {
        var num = $('.clonedFixInput').length; // how many "duplicatable" input fields we currently have
        newNum = num + 1; // the numeric ID of the new input field being added
        var newElem = $('#fix' + num).clone().attr('id', 'fix' + newNum); // create the new element via clone(), and manipulate it's ID using newNum value

        $('.Fixselect').each(function (index) {
            newElem.children('.Fixselect').children('option[value="' + $(this).val() + '"]').remove()
        });
        $('#fix' + num).after(newElem); // insert the new element after the last "duplicatable" input field
        $('#fixDel').attr('disabled', false); // enable the "remove" button


        if (newNum > 2) {
            $('#fixAdd').attr('disabled', true);
        }

        if (newNum > 1) {
            $('#fixDel').attr('disabled', false);
        }

    });

    $('#fixDel').click(function () {
        var num = $('.clonedFixInput').length; // how many "duplicatable" input fields we currently have
        $('#fix' + num).remove(); // remove the last element
        $('#fixAdd').attr('disabled', false); // enable the "add" button
    });
    $('#ageAdd').click(function () {
        var num = $('.clonedAgeInput').length; // how many "duplicatable" input fields we currently have
        newNum = num + 1; // the numeric ID of the new input field being added
        var newElem = $('#age' + num).clone().attr('id', 'age' + newNum); // create the new element via clone(), and manipulate it's ID using newNum value

        $('.Ageselect').each(function (index) {
            newElem.children('.Ageselect').children('option[value="' + $(this).val() + '"]').remove()
            selectedCats.push($(this).val())
        });
        $('#age' + num).after(newElem); // insert the new element after the last "duplicatable" input field
        $('#ageDel').attr('disabled', false); // enable the "remove" button


        if (newNum > 3) {
            $('#ageAdd').attr('disabled', true);
        }

        if (newNum > 1) {
            $('#ageDel').attr('disabled', false);
        }

    });

    $('#ageDel').click(function () {
        var num = $('.clonedAgeInput').length; // how many "duplicatable" input fields we currently have
        $('#age' + num).remove(); // remove the last element
        $('#ageAdd').attr('disabled', false); // enable the "add" button
    });

</script>
</body>
</html>